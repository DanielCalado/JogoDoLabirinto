#include "Tabuleiro.h"
#include <iostream>
using namespace std;

Tabuleiro::Tabuleiro() {}

  int mapParede[40][40] = {
      {0,  2,  3,  4,  5,  6,  7,  8,  9,  10, 11, 12, 13,
       14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26,
       27, 28, 29, 30, 31, 32, 33, 35, 36, 37, 38, 39},
      {0, 3, 8, 13, 15, 18, 20, 26, 28, 31, 33, 35, 39},
      {0,  1,  5,  6,  7,  8,  9,  10, 11, 13, 14,
       15, 16, 22, 23, 24, 26, 29, 32, 37, 39},
      {0,  3,  5,  13, 16, 17, 18, 19, 20, 21, 22, 24,
       26, 27, 28, 29, 31, 32, 33, 34, 36, 37, 38, 39},
      {0, 2, 3, 5, 7, 9, 10, 11, 12, 13, 14, 18, 22, 24, 29, 31, 39},
      {0,  2,  7,  14, 15, 16, 18, 19, 20, 22, 24,
       25, 27, 29, 31, 33, 34, 35, 36, 37, 39},
      {0, 2, 3, 4, 6, 7, 8, 10, 12, 16, 20, 22, 25, 27, 29, 35, 37, 38, 39},
      {0,  1,  2,  6,  8,  10, 12, 13, 14, 16, 18,
       19, 20, 22, 23, 27, 31, 32, 33, 34, 37, 39},
      {0, 4, 6, 10, 14, 18, 23, 25, 26, 27, 28, 29, 34, 36, 37},
      {0,  2,  3,  4,  6,  7,  8,  9,  10, 12, 14, 15, 16,
       18, 20, 21, 23, 27, 31, 32, 33, 34, 35, 36, 39},
      {0, 2, 4, 5, 6, 12, 17, 18, 21, 23, 24, 25, 27, 28, 29, 32, 36, 38, 39},
      {0,  2,  8,  9,  10, 11, 12, 13, 14, 15, 18,
       19, 21, 23, 29, 30, 31, 32, 34, 36, 39},
      {3, 4, 5, 6, 8, 13, 16, 19, 21, 25, 26, 27, 32, 34, 37, 39},
      {0,  1,  3,  7,  8,  10, 11, 15, 16, 17, 19,
       20, 23, 27, 28, 29, 30, 31, 32, 34, 35, 39},
      {0, 3, 5, 7, 11, 13, 14, 15, 17, 19, 22, 23, 24, 25, 26, 28, 37, 39},
      {0,  1,  5,  7,  8,  9,  11, 12, 13, 20, 22,
       26, 28, 29, 31, 32, 33, 34, 35, 36, 37, 39},
      {0, 2, 3, 5, 9, 14, 16, 18, 22, 24, 29, 37, 39},
      {0,  3,  5,  6,  7,  9,  10, 12, 13, 14, 15, 16, 18, 20,
       22, 24, 25, 26, 27, 30, 31, 33, 34, 36, 37, 37, 39},
      {0, 1, 9, 10, 11, 12, 17, 18, 20, 21, 22, 26, 28, 36, 39},
      {0,  3,  4,  5,  6,  7,  12, 14, 15, 18, 24,
       28, 29, 30, 31, 32, 33, 34, 36, 37, 39},
      {0, 2, 3, 7, 8, 9, 10, 15, 16, 21, 23, 26, 30, 37, 39},
      {0,  5,  6,  11, 13, 16, 18, 19, 21, 21, 23, 24,
       25, 26, 27, 28, 31, 32, 33, 35, 36, 37, 39},
      {0, 1, 2, 3, 4, 6, 8, 9, 10, 11, 13, 14, 18, 22, 29, 31, 34, 37, 39},
      {0,  2,  6,  8,  12, 16, 17, 18, 20, 24,
       25, 27, 28, 29, 31, 32, 34, 35, 36, 39},
      {0, 4, 6, 8, 10, 12, 14, 15, 20, 21, 22, 23, 28, 32, 36, 37, 38, 39},
      {0,  1,  2,  4,  6,  8,  10, 14, 17, 18, 19,
       20, 22, 25, 27, 28, 30, 31, 32, 34, 39},
      {0,  2,  4,  5,  6,  7,  9,  10, 11, 12, 13,
       14, 15, 18, 24, 27, 34, 35, 36, 37, 38, 39},
      {0, 2, 9, 12, 16, 18, 20, 23, 26, 27, 28, 30, 31, 33, 34, 39},
      {0,  3,  4,  5,  7,  8,  9,  11, 14, 16, 18, 20,
       22, 23, 24, 26, 28, 29, 30, 36, 37, 38, 39},
      {0, 2, 3, 7, 11, 13, 14, 20, 28, 30, 32, 33, 34, 36, 39},
      {0,  1,  5,  6,  7,  9,  15, 17, 18, 19,
       20, 21, 23, 24, 25, 26, 27, 30, 38, 39},
      {0,  3,  4,  5,  7,  9,  10, 11, 12, 13,
       15, 19, 21, 29, 30, 31, 33, 34, 35, 39},
      {2, 4, 9, 15, 17, 18, 19, 22, 24, 25, 26, 27, 30, 33, 37, 39},
      {0,  1,  2,  4,  6,  7,  8,  9,  11, 12, 13, 14, 15,
       16, 20, 26, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37},
      {0, 2, 7, 15, 18, 19, 20, 21, 23, 24, 26, 30, 39},
      {0,  2,  3,  4,  5,  7,  8,  9,  11, 12, 14, 15, 16, 18,
       21, 22, 24, 26, 28, 30, 31, 32, 34, 35, 36, 37, 39},
      {0, 3, 7, 12, 16, 18, 20, 28, 34, 39},
      {0,  2,  3,  5,  7,  9,  11, 13, 14, 15, 16, 18, 19, 20, 22,
       23, 24, 25, 27, 28, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39},
      {0, 5, 9, 11, 22, 27, 39},
      {0,  1,  3,  4,  5,  6,  7,  8,  9,  10, 11, 12, 13,
       14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26,
       27, 28, 29, 30, 31, 32, 33, 34, 35, 37, 38, 39}};

#define SIZEOF(mapParede) sizeof(mapParede[i]) / sizeof(mapParede[i][0])

void Tabuleiro::montarTabuleiro() {

  for (int i = 0; i < 40; i++) {
    for (int j = 0; j < 40; j++) {
      tabuleiroJogo[i][j] = "  ";
    }
  }
  for (int i = 0; i < 40; i++) {
    for (int j = 0; j < SIZEOF(mapParede); j++) {
      tabuleiroJogo[i][mapParede[i][j]] = "■ ";
    }
  }
  tabuleiroJogo[12][0] = "  ";
  tabuleiroJogo[32][0] = "  ";
  tabuleiroJogo[19][19] = "\033[36m■ \033[97m";
  tabuleiroJogo[19][20] = "\033[36m■ \033[97m";
  tabuleiroJogo[20][19] = "\033[36m■ \033[97m";
  tabuleiroJogo[20][20] = "\033[36m■ \033[97m";
};

void Tabuleiro::imprimirTabuleiro() {
  verificarVencedor();
    for (int i = 0; i < 40; i++) {
      for (int j = 0; j < 40; j++) {
        cout << tabuleiroJogo[i][j];
      };
      cout << "\n";
    };
};

void Tabuleiro::verificarVencedor() {
  if (tabuleiroJogo[19][19] == "\033[91m■ \033[97m" ||
      tabuleiroJogo[19][20] == "\033[91m■ \033[97m" ||
      tabuleiroJogo[20][20] == "\033[91m■ \033[97m" ||
      tabuleiroJogo[20][19] == "\033[91m■ \033[97m") {

    std::string text =
        "■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■\n"
        "■     ■         ■         ■   ■     ■ ■\n"
        "■ ■   ■   ■ ■ ■ ■ ■ ■ ■   ■ ■ ■ ■     ■\n"
        "■         ■               ■     ■ ■ ■ ■\n"
        "■   ■   ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■       ■\n"
        "■   ■   ■                     ■ ■   ■ ■\n"
        "■   ■ ■ ■    J O G A D O R    ■       ■\n"
        "■ ■ ■   ■                     ■ ■     ■\n"
        "■       ■      \033[91m■ ■ ■ ■ ■\033[97m      ■     ■ ■\n"
        "■   ■ ■ ■      \033[91m■ ■ ■ ■ ■\033[97m      ■ ■     ■\n"
        "■   ■   ■      \033[91m■ ■ ■ ■ ■\033[97m      ■   ■ ■ ■\n"
        "■   ■   ■      \033[91m■ ■ ■ ■ ■\033[97m      ■ ■   ■ ■\n"
        "■       ■                     ■       ■\n"
        "■ ■   ■ ■     V E N C E U     ■ ■ ■   ■\n"
        "■       ■                     ■   ■   ■\n"
        "■ ■   ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■       ■\n"
        "■   ■ ■   ■       ■             ■   ■ ■\n"
        "■     ■   ■ ■ ■   ■ ■   ■ ■ ■ ■ ■     ■\n"
        "■ ■                 ■   ■         ■   ■\n"
        "■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■\n";
    cout << text;
    ThisThread::sleep_for(5000ms);
    status = false;
  }

  if (tabuleiroJogo[19][19] == "\033[32m■ \033[97m" ||
      tabuleiroJogo[19][20] == "\033[32m■ \033[97m" ||
      tabuleiroJogo[20][20] == "\033[32m■ \033[97m" ||
      tabuleiroJogo[20][19] == "\033[32m■ \033[97m") {

    std::string text =
        "■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■\n"
        "■     ■         ■         ■   ■     ■ ■\n"
        "■ ■   ■   ■ ■ ■ ■ ■ ■ ■   ■ ■ ■ ■     ■\n"
        "■         ■               ■     ■ ■ ■ ■\n"
        "■   ■   ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■       ■\n"
        "■   ■   ■                     ■ ■   ■ ■\n"
        "■   ■ ■ ■    J O G A D O R    ■       ■\n"
        "■ ■ ■   ■                     ■ ■     ■\n"
        "■       ■      \033[32m■ ■ ■ ■ ■\033[97m      ■     ■ ■\n"
        "■   ■ ■ ■      \033[32m■ ■ ■ ■ ■\033[97m      ■ ■     ■\n"
        "■   ■   ■      \033[32m■ ■ ■ ■ ■\033[97m      ■   ■ ■ ■\n"
        "■   ■   ■      \033[32m■ ■ ■ ■ ■\033[97m      ■ ■   ■ ■\n"
        "■       ■                     ■       ■\n"
        "■ ■   ■ ■     V E N C E U     ■ ■ ■   ■\n"
        "■       ■                     ■   ■   ■\n"
        "■ ■   ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■       ■\n"
        "■   ■ ■   ■       ■             ■   ■ ■\n"
        "■     ■   ■ ■ ■   ■ ■   ■ ■ ■ ■ ■     ■\n"
        "■ ■                 ■   ■         ■   ■\n"
        "■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■ ■\n";
    cout << text;
    ThisThread::sleep_for(5000ms);
    status = false;
  }
};